<section class="register-card">
	<jsn-card [header]="'Register'" [border]="true">
		<form class="add-to-do-form" [formGroup]="registerUserForm">
			<mat-form-field>
				<input matInput placeholder="Firstname"
					   [formControlName]="'firstname'"
					   autocomplete="off"
					   matTooltip="Only first letter capital &#13;Min. 2 letters"
					   [matTooltipHideDelay]="1000"
					   [matTooltipClass]="showError('firstname') ? ['tooltip', 'error-tooltip'] : 'tooltip'"
					   [matTooltipPosition]="'below'"
					   #firstnameTooltip="matTooltip">
				<mat-error *ngIf="registerUserForm.controls['firstname'].hasError('required')">
					<strong>Required</strong>
				</mat-error>
			</mat-form-field>
			<mat-form-field>
				<input matInput placeholder="Lastname"
					   [formControlName]="'lastname'"
					   autocomplete="off"
					   matTooltip="Only first letter capital &#13;Min. 2 letters"
					   [matTooltipHideDelay]="1000"
					   [matTooltipClass]="showError('lastname') ? 'tooltip error-tooltip' : 'tooltip'"
					   [matTooltipPosition]="'below'"
					   #lastnameTooltip="matTooltip">
				<mat-error *ngIf="registerUserForm.controls['lastname'].hasError('required')">
					<strong>Required</strong>
				</mat-error>
			</mat-form-field>
			<mat-radio-group
				class="sex-radio-group"
				[formControlName]="'sex'"
				color="primary">
				<mat-radio-button class="example-radio-button" [value]="'F'">
					<span [ngClass]="{'invalid-input' : sexInputError}">Female</span>
				</mat-radio-button>
				<mat-radio-button class="example-radio-button" [value]="'M'">
					<span [ngClass]="{'invalid-input' : sexInputError}">Male</span>
				</mat-radio-button>
			</mat-radio-group>
			<mat-form-field>
				<input matInput placeholder="Password"
					   [formControlName]="'password'"
					   autocomplete="off"
					   type="password"
					   matTooltip="Minimum 8 characters"
					   [matTooltipHideDelay]="1000"
					   [matTooltipClass]="showError('password') ? 'tooltip error-tooltip' : 'tooltip'"
					   [matTooltipPosition]="'below'"
					   #passwordTooltip="matTooltip">
				<mat-error *ngIf="registerUserForm.controls['password'].hasError('required')">
					<strong>Required</strong>
				</mat-error>
			</mat-form-field>
			<mat-form-field>
				<input matInput placeholder="Confirm Password"
					   [formControlName]="'passwordConfirmation'"
					   autocomplete="off"
					   type="password"
					   matTooltip="Identical"
					   [matTooltipHideDelay]="1000"
					   [matTooltipClass]="!identicalPasswords() ? 'tooltip error-tooltip' : 'tooltip'"
					   [matTooltipPosition]="'below'"
					   #passwordConfirmationTooltip="matTooltip">
				<mat-error *ngIf="registerUserForm.controls['passwordConfirmation'].hasError('required')">
					<strong>Required</strong>
				</mat-error>
			</mat-form-field>
			<mat-form-field>
				<input matInput placeholder="Login"
					   [formControlName]="'login'"
					   autocomplete="off"
					   matTooltip="3-12 characters &#13; All lowercase"
					   [matTooltipHideDelay]="1000"
					   [matTooltipClass]="showError('login') ? 'tooltip error-tooltip' : 'tooltip'"
					   [matTooltipPosition]="'below'"
					   #loginTooltip="matTooltip">
				<mat-error *ngIf="registerUserForm.controls['login'].hasError('required')">
					<strong>Required</strong>
				</mat-error>
				<div matSuffix *ngIf="availabilityStatus === AvailabilityStatus.CHECKING">
					<mat-spinner [diameter]="24" [strokeWidth]="4" [color]="'accent'"></mat-spinner>
				</div>
				<mat-icon matSuffix *ngIf="availabilityStatus === AvailabilityStatus.TAKEN" id="login-taken-icon">
					close
				</mat-icon>
				<mat-icon matSuffix *ngIf="availabilityStatus === AvailabilityStatus.AVAILABLE" id="login-av-icon">
					check_circle
				</mat-icon>
			</mat-form-field>
			<div id="file-input-wrapper">
				<input hidden type="file" #fileInput [formControlName]="'photo'" (change)="fileChange($event)"
					   accept=".jpg,.png">
				<button [disabled]="fileInputConfig.disabled" mat-stroked-button type="submit" color="primary"
						(click)="fileInput.click()">Add Photo
				</button>
				<label>
					<strong *ngIf="selectedFile">File: </strong><span [ngClass]="{'invalid-input' : photoInputError}">{{fileInputConfig.label}}</span>
				</label>
			</div>
		</form>
		<div class="button-row">
			<button mat-raised-button type="submit" class="mat-elevation-z4" color="primary" (click)="register()">
				Register
			</button>
		</div>
	</jsn-card>
</section>
