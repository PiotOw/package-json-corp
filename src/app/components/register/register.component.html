<section class="register-card">
	<jsn-card [header]="'Register'" [border]="true">
		<form class="add-to-do-form" [formGroup]="registerUserForm">
			<mat-form-field>
				<input matInput placeholder="Firstname"
					   [formControlName]="'firstname'"
					   autocomplete="off"
					   matTooltip="3 - 8 characters &#13; asjkdn ajsknd ajknd"
					   [matTooltipHideDelay]="1000"
					   [matTooltipClass]="registerUserForm.controls['firstname'].touched && registerUserForm.controls['firstname'].errors ? 'red-tooltip' : 'tooltip'"
					   [matTooltipPosition]="'left'">
				<mat-error *ngIf="registerUserForm.controls['firstname'].hasError('required')">
					This field is <strong>required</strong>
				</mat-error>
			</mat-form-field>
			<mat-form-field>
				<input matInput placeholder="Lastname"
					   [formControlName]="'lastname'"
					   autocomplete="off">
				<mat-error *ngIf="registerUserForm.controls['lastname'].hasError('required')">
					This field is <strong>required</strong>
				</mat-error>
				<mat-error *ngIf="registerUserForm.controls['lastname'].touched && registerUserForm.controls['lastname'].hasError('required')">
					This field is <strong>required</strong>
				</mat-error>

			</mat-form-field>
			<mat-form-field>
				<input matInput placeholder="Password"
					   [formControlName]="'password'"
					   autocomplete="off"
					   type="password">
				<mat-error *ngIf="registerUserForm.controls['password'].hasError('required')">
					This field is <strong>required</strong>
				</mat-error>
			</mat-form-field>
			<mat-form-field>
				<input matInput placeholder="Confirm Password"
					   [formControlName]="'passwordConfirmation'"
					   autocomplete="off"
					   type="password">
				<mat-error *ngIf="registerUserForm.controls['passwordConfirmation'].hasError('required')">
					This field is <strong>required</strong>
				</mat-error>
			</mat-form-field>
			<mat-form-field>
				<input matInput placeholder="Username"
					   [formControlName]="'username'"
					   autocomplete="off">
				<mat-error *ngIf="registerUserForm.controls['username'].hasError('required')">
					This field is <strong>required</strong>
				</mat-error>
				<div matSuffix *ngIf="availabilityStatus === AvailabilityStatus.CHECKING">
					<mat-spinner [diameter]="24" [strokeWidth]="4" [color]="'accent'"></mat-spinner>
				</div>
				<mat-icon matSuffix *ngIf="availabilityStatus === AvailabilityStatus.TAKEN" id="username-taken-icon">close</mat-icon>
				<mat-icon matSuffix *ngIf="availabilityStatus === AvailabilityStatus.AVAILABLE" id="username-av-icon">check_circle</mat-icon>
			</mat-form-field>
			<div id="file-input-wrapper">
				<input hidden type="file" #fileInput [formControlName]="'photo'" (change)="fileChange($event)"
					   accept=".jpg,.png">
				<button [disabled]="fileInputConfig.disabled" mat-stroked-button type="submit" color="primary"
						(click)="fileInput.click(); onOpenFileInputClick()">Add Photo
				</button>
				<label>
					<strong *ngIf="selectedFile">File: </strong><span>{{fileInputConfig.label}}</span>
					<mat-error
						*ngIf="registerUserForm.controls['photo'].touched && registerUserForm.controls['photo'].hasError('required')">
						This field is <strong>required</strong>
					</mat-error>
				</label>
			</div>
		</form>
		<div class="button-row">
			<button mat-raised-button type="submit" class="mat-elevation-z4" color="primary" (click)="onSubmit()">Register</button>
		</div>
	</jsn-card>
</section>
